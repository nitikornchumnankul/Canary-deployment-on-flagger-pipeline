(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1213:function(e,t,n){"use strict";n.d(t,"c",function(){return j}),n.d(t,"b",function(){return E}),n.d(t,"a",function(){return _});var o=n(47),r=n.n(o),a=n(149),i=n.n(a),c=n(0),l=n.n(c),s=n(18),u=n.n(s),p=n(9),d=n(1);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function v(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach(function(t){k(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=16,S={"wc-stop":{svg:l.a.createElement("polygon",{points:"397.414486 202.259745 428.693916 233.377342 428.813072 278.039879 397.702153 310.084647 353.585514 310.740255 322.306084 279.622658 322.186928 234.960121 353.297847 202.915353"}),viewBox:"321 201 109 111"},"wc-stop-o":{svg:l.a.createElement("g",null,l.a.createElement("path",{d:"M397.414486,202.259745 L428.693916,233.377342 L428.813072,278.039879 L397.702153,310.084647 L353.585514,310.740255 L322.306084,279.622658 L322.186928,234.960121 L353.297847,202.915353 L397.414486,202.259745 Z M393.924588,210.897545 L420.222746,237.059642 L420.322926,274.609638 L394.166444,301.551253 L357.075412,302.102455 L330.777254,275.940358 L330.677074,238.390362 L356.833556,211.448747 L393.924588,210.897545 Z",fillRule:"evenodd"}),l.a.createElement("polygon",{fillRule:"evenodd",points:"390.267655 219.948772 411.346124 240.918187 411.42642 271.015216 390.461507 292.609429 360.732345 293.051228 339.653876 272.081813 339.57358 241.984784 360.538493 220.390571"})),viewBox:"321 201 109 111"}};function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e){if(i()(e,"wc-"))return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=S[e];if(n){var o=w({fill:u.a.colors.purple300,height:O,width:O},t);return l.a.createElement("svg",{style:o,viewBox:n.viewBox},n.svg)}}(e,t);var o=w({color:u.a.colors.purple300,fontSize:O},t);return l.a.createElement("i",g({style:o,className:e},n))}}var E=Object(d.default)(p.Text).withConfig({displayName:"flux-button__Label",componentId:"wwwnph-0"})(["line-height:28px;font-size:",";padding:0 12px;min-width:90px;"],function(e){return e.theme.fontSizes.small}),_=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return o=this,r=(e=h(t)).call.apply(e,[this].concat(i)),n=!r||"object"!==f(r)&&"function"!=typeof r?y(o):r,k(y(n),"handleClick",function(e){var t=n.props.onClick;t&&t(n.props.value,e)}),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,l.a.Component),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.fa,n=e.title,o=e.svg,a=e.label,i=e.flat,c=e.primary,s=e.selected,d=e.style,f=r()(this.props,["fa","title","svg","flat","onClick","style"]),m=w({display:"inline-block",fontSize:u.a.fontSizes.small},i&&{backgroundColor:"transparent"},{},i&&!s&&{boxShadow:"none"},{},d),h=w({verticalAlign:"text-top"},c&&{color:"white"});return l.a.createElement(p.Button,g({title:n,style:m,onClick:this.handleClick},f),j(t||o,h)," ",l.a.createElement("span",null,a))}}])&&m(n.prototype,o),a&&m(n,a),t}()},1219:function(e,t,n){"use strict";n.d(t,"f",function(){return s}),n.d(t,"g",function(){return u}),n.d(t,"d",function(){return p}),n.d(t,"e",function(){return d}),n.d(t,"a",function(){return f}),n.d(t,"c",function(){return m}),n.d(t,"b",function(){return h});var o=n(6),r=n.n(o),a=n(15),i=n.n(a),c=n(23),l=n(1232),s=Object(c.createSelector)([function(e){return r()(e,["root","timeTravel","timestamp"])},function(e){return r()(e,["root","timeTravel","rangeMs"])}],function(e,t){return i()(e).subtract(t).utc().format()}),u=Object(c.createSelector)([s],function(e){return i()(e).unix()}),p=Object(c.createSelector)([function(e){return r()(e,["root","timeTravel","timestamp"])}],function(e){return i()(e).utc().format()}),d=Object(c.createSelector)([p],function(e){return i()(e).unix()}),f=d,m=Object(c.createSelector)([function(e){return r()(e,["root","timeTravel","rangeMs"])}],function(e){return e/1e3}),h=Object(c.createSelector)([m],function(e){return Object(l.a)(e)})},1221:function(e,t,n){"use strict";var o=n(185),r=n.n(o),a=n(0),i=n.n(a),c=n(22),l=n(9),s=n(13),u=n.n(s),p=n(15),d=n.n(p),f=n(64),m=n(2),h=n(111),y=n(11),b=n(76),g=n(7),v=n(16),w=n(1232),k=n(125);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach(function(t){P(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=d.a.duration(2,"weeks").asSeconds(),x=function(e){function t(e){var n,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=_(t).call(this,e),n=!a||"object"!==O(a)&&"function"!=typeof a?C(o):a,P(C(n),"updateUrl",function(e){n.props.exploreContext?window.location=e:u.a.push(e)}),P(C(n),"updatedPath",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n.props.exploreContext)return Object(y.u)(j({},n.props.sharedQueryParams,{},e),n.props.instanceId);var t=u.a.getCurrentLocation(),o=t.hash,r=Object(k.h)(e,n.props.location);return"".concat(n.props.location.pathname).concat(r).concat(o)}),P(C(n),"updateUrlWith",function(e){var t=u.a.getCurrentLocation(),o=t.pathname,r=t.search,a=t.hash,i=decodeURI("".concat(o).concat(r).concat(a)),c=n.updatedPath(e);c!==i&&n.updateUrl(c)}),P(C(n),"updateVisibleRange",function(e){var t=e.startAt,o=e.endAt,r=n.props,a=r.instanceId,i=r.workloadId,c=void 0===i?v.FLUX_ALL_WORKLOADS:i,l=d()(o).unix(),s=d()(t).unix();n.setState({visibleRangeEndAtSec:l,visibleRangeStartAtSec:s}),l-s<T&&(n.setState({isLoadingDeployments:!0}),n.props.getFluxHistory(a,c,null,o,!0,t).then(function(){n.setState({isLoadingDeployments:!1})}))}),P(C(n),"handleLiveModeChange",function(e){n.props.updateTimeTravelLiveState(e),e&&n.updateUrlWith({timestamp:null})}),P(C(n),"handleTimestampChange",function(e){n.props.updateTimeTravelTimestamp(e),n.updateUrlWith({timestamp:e})}),P(C(n),"handleRangeChange",function(e){var t=Object(k.j)({rangeMs:e}).range;n.props.updateTimeTravelRange(e),n.updateUrlWith({range:t})}),P(C(n),"trackTimelineTimestampEdit",function(){Object(g.trackEvent)("timeline.timestamp.edit")}),P(C(n),"trackTimelineTimestampButtonClick",function(){Object(g.trackEvent)("timeline.timestamp.button.click")}),P(C(n),"trackTimelinePanButtonClick",function(){Object(g.trackEvent)("timeline.pan.button.click")}),P(C(n),"trackTimelinePan",function(){Object(g.trackEvent)("timeline.pan")}),P(C(n),"trackTimelineZoom",function(e){Object(g.trackEvent)("timeline.zoom",{zoomedPeriod:e})}),P(C(n),"trackDeploymentClick",function(){Object(g.trackEvent)("timeline.deployment.click")}),P(C(n),"deploymentsLinkBuilder",function(e){return Object(y.q)(n.props.sharedQueryParams,n.props.instanceId,e)}),n.state={isLoadingDeployments:!1,visibleRangeEndAtSec:null,visibleRangeStartAtSec:null},n.debouncedUpdateVisibleRange=r()(n.updateVisibleRange,500),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,i.a.PureComponent),n=t,(o=[{key:"componentDidMount",value:function(){this.props.showingLive&&this.startAutoRefreshTimer(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.showingLive!==e.showingLive&&(e.showingLive?this.startAutoRefreshTimer(e):this.stopAutoRefreshTimer()),this.props.rangeMs!==e.rangeMs&&e.showingLive&&(this.stopAutoRefreshTimer(),this.startAutoRefreshTimer(e))}},{key:"componentWillUnmount",value:function(){this.stopAutoRefreshTimer(),this.debouncedUpdateVisibleRange.cancel()}},{key:"startAutoRefreshTimer",value:function(e){var t=this,n=e.hasRangeSelector,o=e.rangeMs,r=n?Object(w.a)(o):1e4;this.props.updateTimeTravelTimestamp(Object(k.c)()),this.autoRefreshTimer=setInterval(function(){t.props.updateTimeTravelTimestamp(Object(k.c)())},r)}},{key:"stopAutoRefreshTimer",value:function(){clearInterval(this.autoRefreshTimer)}},{key:"render",value:function(){var e=this.state,t=e.isLoadingDeployments,n=e.visibleRangeStartAtSec,o=e.visibleRangeEndAtSec,r=this.props.deployments.filter(function(e){var t=d()(e.Stamp).unix();return n<=t&&t<=o});return i.a.createElement(l.TimeTravel,{hasLiveMode:!0,showingLive:this.props.showingLive,onChangeLiveMode:this.handleLiveModeChange,timestamp:this.props.timestamp,earliestTimestamp:this.props.firstSeenConnectedAt,onChangeTimestamp:this.handleTimestampChange,hasRangeSelector:this.props.hasRangeSelector,rangeMs:this.props.rangeMs,onChangeRange:this.handleRangeChange,onUpdateVisibleRange:this.debouncedUpdateVisibleRange,onTimestampInputEdit:this.trackTimelineTimestampEdit,onTimelineLabelClick:this.trackTimelineTimestampButtonClick,onTimelinePanButtonClick:this.trackTimelinePanButtonClick,onTimelineZoom:this.trackTimelineZoom,onTimelinePan:this.trackTimelinePan,onDeploymentClick:this.trackDeploymentClick,deploymentsLinkBuilder:this.deploymentsLinkBuilder,deployments:r,isLoading:t})}}])&&E(n.prototype,o),a&&E(n,a),t}();x.defaultProps={exploreContext:!1,hasRangeSelector:!1},t.a=Object(c.connect)(function(e,t){var n=t.instanceId,o=t.workloadId,r=Object(f.f)(n)(e);return j({deployments:Object(b.a)(e,n,o),firstSeenConnectedAt:r&&r.firstSeenConnectedAt,sharedQueryParams:Object(h.b)(e),timeState:e.root.timeTravel},e.root.timeTravel)},{getFluxHistory:m.A,updateTimeTravelLiveState:m.Yb,updateTimeTravelRange:m.Zb,updateTimeTravelTimestamp:m.ac})(x)},1232:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(e){return e/200}},1238:function(e,t,n){"use strict";var o=n(77),r=n.n(o),a=n(1289),i=n.n(a),c=n(0),l=n.n(c),s=n(1),u=n(5),p=n.n(u);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b,g,v,w=s.default.span.withConfig({displayName:"last-bit-is-important__Container",componentId:"sc-1f0px90-0"})(["display:flex;white-space:nowrap;"]),k=s.default.span.withConfig({displayName:"last-bit-is-important__Initial",componentId:"sc-1f0px90-1"})(["opacity:",";display:flex;color:inherit;min-width:0;"],function(e){return e.faded?.65:1}),O=s.default.span.withConfig({displayName:"last-bit-is-important__Shortened",componentId:"sc-1f0px90-2"})(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:0;"]),S=s.default.span.withConfig({displayName:"last-bit-is-important__Last",componentId:"sc-1f0px90-3"})([""]),j=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,h(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,l.a.Component),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.value,n=e.separator,o=e.highlighted,a=t.split(n),c=i()(a).join(n),s=r()(a);return l.a.createElement(w,null,l.a.createElement(k,{faded:o},l.a.createElement(O,null,c),c&&l.a.createElement("span",null,n)),l.a.createElement(S,null,s))}}])&&f(n.prototype,o),a&&f(n,a),t}();v={highlighted:!1,separator:"/"},(g="defaultProps")in(b=j)?Object.defineProperty(b,g,{value:v,enumerable:!0,configurable:!0,writable:!0}):b[g]=v,j.propTypes={highlighted:p.a.bool,separator:p.a.string,value:p.a.string.isRequired},t.a=j},1249:function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"b",function(){return i}),n.d(t,"a",function(){return c});var o=n(15),r=n.n(o),a=function(e){return r()(e).subtract(1,"month")},i=function(e){return e&&r()(e).format("D MMM YYYY")};function c(e){return r.a.utc(e).format()}},1266:function(e,t,n){"use strict";n.d(t,"a",function(){return E});var o=n(188),r=n.n(o),a=n(14),i=n.n(a),c=n(39),l=n.n(c),s=n(228),u=n.n(s),p=n(0),d=n.n(p),f=n(5),m=n.n(f),h=n(1);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=h.default.div.withConfig({displayName:"tab-selector__TabSelectorWrapper",componentId:"sc-1s9qozc-0"})([""]),O=h.default.div.withConfig({displayName:"tab-selector__TabButtons",componentId:"sc-1s9qozc-1"})([""]),S=h.default.button.withConfig({displayName:"tab-selector__TabButton",componentId:"sc-1s9qozc-2"})(["cursor:pointer;margin-bottom:-1px;margin-right:5px;padding:10px 20px;font-size:",";outline:0;",";",""],function(e){return e.theme.fontSizes.large},function(e){var t=e.selected,n=e.theme;return"\n    background-color: ".concat(t?n.colors.white:n.colors.gray50,";\n    border-top-left-radius: ").concat(n.borderRadius.soft,";\n    border-top-right-radius: ").concat(n.borderRadius.soft,";\n    border: 1px solid ").concat(n.colors.purple100,";\n  ")},function(e){return e.selected&&"border-bottom: 1px solid transparent;"}),j=h.default.span.withConfig({displayName:"tab-selector__TabName",componentId:"sc-1s9qozc-3"})(["color:",";opacity:",";"],function(e){return e.theme.colors.purple900},function(e){return e.selected?1:.65}),E=h.default.div.withConfig({displayName:"tab-selector__TabContent",componentId:"sc-1s9qozc-4"})(["padding:20px;background-color:",";",";"],function(e){return e.theme.colors.white},function(e){return"\n    border-top-right-radius: ".concat(e.theme.borderRadius.soft,";\n    border-bottom-right-radius: ").concat(e.theme.borderRadius.soft,";\n    border-bottom-left-radius: ").concat(e.theme.borderRadius.soft,";\n    border: 1px solid ").concat(e.theme.colors.purple100,";\n  ")}),_=function(e){function t(e){var n,o,r,a,i,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,r=g(t).call(this,e),n=!r||"object"!==y(r)&&"function"!=typeof r?v(o):r,a=v(n),c=function(e){n.setState({selectedTabId:e.props.id}),n.props.onSelectedTabChange&&n.props.onSelectedTabChange(e.props.id)},(i="handleClick")in a?Object.defineProperty(a,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[i]=c,n.state={selectedTabId:e.selectedTabId},n.isTabSelected=function(e){return e.props.id===n.state.selectedTabId},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,d.a.Component),n=t,(o=[{key:"componentWillReceiveProps",value:function(e){e.selectedTabId!==this.props.selectedTabId&&this.setState({selectedTabId:e.selectedTabId})}},{key:"render",value:function(){var e=this,t=u()(r()(this.props.children)),n=l()(t,this.isTabSelected);return d.a.createElement(k,null,d.a.createElement(O,null,i()(t,function(t,n){return d.a.createElement(S,{key:n,selected:e.isTabSelected(t),onClick:function(){return e.handleClick(t)}},d.a.createElement(j,{selected:e.isTabSelected(t)},t&&t.props.name))})),d.a.createElement(E,null,n&&n.props.children))}}])&&b(n.prototype,o),a&&b(n,a),t}();_.propTypes={selectedTabId:m.a.string.isRequired},t.b=_},1267:function(e,t,n){"use strict";var o=n(0),r=n.n(o),a=n(1);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=Object(a.keyframes)(["0%,50%,100%{opacity:1;}25%{opacity:0.5;}"]),d=a.default.div.withConfig({displayName:"glowing-loader__LoadingWrapper",componentId:"sc-69yzhu-0"})(["display:block;",";"],function(e){return e.isLoading&&Object(a.css)(["animation:"," 2.5s infinite;"],p)}),f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,s(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.a.PureComponent),n=t,(o=[{key:"render",value:function(){return r.a.createElement(d,{isLoading:this.props.isLoading},this.props.children)}}])&&c(n.prototype,o),a&&c(n,a),t}();t.a=f},1268:function(e,t,n){"use strict";var o=n(126),r=n.n(o),a=n(0),i=n.n(a),c=n(22),l=n(9),s=n(7),u=n(86),p=n(8),d=n(11),f=n(111),m=n(1219);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){function t(e,n){var o,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=g(t).call(this,e,n),o=!a||"object"!==h(a)&&"function"!=typeof a?v(r):a,k(v(o),"trackDeploymentClick",function(){Object(s.trackEvent)("prom.graph.deployment.click")}),k(v(o),"deploymentsLinkBuilder",function(e){return Object(d.q)(o.props.sharedQueryParams,o.props.instanceId,e)}),o.state={endTimeSec:e.endTimeSec,error:null,isFirstLoading:!0,multiSeries:[],startTimeSec:e.startTimeSec,stepDurationSec:e.stepDurationSec},o.activeRequest=null,o.queuedRequestParams=null,o}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,i.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.maybeFetchGraphData(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=e.instanceId!==this.props.instanceId,n=e.query!==this.props.query,o=e.rangeSec!==this.props.rangeSec,r=e.endTimeSec!==this.props.endTimeSec;if(t||n||o||r){var a=Math.abs(e.endTimeSec-this.props.endTimeSec)>2*e.stepDurationSec;t||n||o||a?(this.setState({isFirstLoading:!0}),this.activeRequest&&this.activeRequest.cancel()):this.props.onRefreshStart&&this.props.onRefreshStart(),this.maybeFetchGraphData(e)}}},{key:"componentWillUnmount",value:function(){this.queuedRequestParams=null,this.activeRequest&&this.activeRequest.cancel()}},{key:"fetchGraphData",value:function(e){var t=this,n=e.query,o=e.startTimeSec,r=e.endTimeSec,a=e.stepDurationSec,i={end:r,query:n,start:o,step:a};this.activeRequest=Object(u.a)(Object(p.X)(this.props.instanceId,i).then(function(e){return Promise.resolve(function(e){var t=[],n=null;return"matrix"!==e.data.resultType?n="Result is not of matrix type!":e.data.result&&0===e.data.result.length?n="No datapoints found. Maybe the metric does not exist?":t=e.data.result,{error:n,multiSeries:t}}(e))},function(e){return Promise.resolve({error:e.error||e.errors[0].message})}));var c=this.activeRequest,l=window.performance.now();c.promise.then(function(e){var i=e.isCanceled,c=e.multiSeries,s=void 0===c?[]:c,u=e.error,p=window.performance.now();if(t.queuedRequestParams){var d=t.queuedRequestParams;t.queuedRequestParams=null,t.fetchGraphData(d)}else t.activeRequest=null;if(!i){var f=t.state.isFirstLoading,m=Math.round(p-l),h={isFirstLoading:f,query:n,responseTime:m};u&&t.props.onReceiveError&&t.props.onReceiveError(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach(function(t){k(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({error:u},h)),!u&&t.props.onReceiveSuccess&&t.props.onReceiveSuccess(h),t.props.onRefreshFinish&&t.props.onRefreshFinish(s),t.setState({endTimeSec:r,error:u,isFirstLoading:!1,multiSeries:s,startTimeSec:o,stepDurationSec:a})}})}},{key:"maybeFetchGraphData",value:function(e){var t=r()(e,["query","startTimeSec","endTimeSec","stepDurationSec"]);this.activeRequest?this.queuedRequestParams=t:this.fetchGraphData(t)}},{key:"render",value:function(){return i.a.createElement(l.PrometheusGraph,{error:this.state.error,loading:this.state.isFirstLoading,multiSeries:this.state.multiSeries,stepDurationSec:this.state.stepDurationSec,startTimeSec:this.state.startTimeSec,endTimeSec:this.state.endTimeSec,yAxisLabel:this.props.yAxisLabel,metricUnits:this.props.metricUnits,valuesMinSpread:this.props.valuesMinSpread,showStacked:this.props.showStacked,colorTheme:this.props.colorTheme,simpleTooltip:this.props.simpleTooltip,legendCollapsable:this.props.legendCollapsable,legendShown:this.props.legendShown,renderLegendItemSuffix:this.props.renderLegendItemSuffix,selectedLegendKeys:this.props.selectedLegendKeys,getSeriesKey:this.props.getSeriesKey,onChangeLegendSelection:this.props.onChangeLegendSelection,onDeploymentClick:this.trackDeploymentClick,deploymentsLinkBuilder:this.deploymentsLinkBuilder,deployments:this.props.deployments})}}])&&b(n.prototype,o),a&&b(n,a),t}();t.a=Object(c.connect)(function(e,t){var n=t.startTimeSec;return{endTimeSec:Object(m.e)(e),rangeSec:Object(m.c)(e),sharedQueryParams:Object(f.b)(e),startTimeSec:n||Object(m.g)(e),stepDurationSec:Object(m.b)(e)}})(O)},1289:function(e,t,n){var o=n(306);e.exports=function(e){return null!=e&&e.length?o(e,0,-1):[]}},1290:function(e,t,n){"use strict";var o=n(0),r=n.n(o),a=n(1),i=Object(a.keyframes)(["0%,40%,100%{transform:scaleY(0.333);}20%{transform:scaleY(1);}"]),c=a.default.div.withConfig({displayName:"bar-progress__Container",componentId:"sc-17vpj1i-0"})(["display:inline-block;width:21px;height:18px;text-align:center;vertical-align:middle;"]),l=a.default.div.withConfig({displayName:"bar-progress__Bar",componentId:"sc-17vpj1i-1"})(["background-color:",";height:100%;width:4px;display:inline-block;animation:"," 1.2s infinite ease-in-out;animation-delay:","s;margin-right:3px;&:last-child{margin-right:0;}"],function(e){return e.theme.colors.blue600},i,function(e){var t=e.animationDelay;return void 0===t?0:t});function s(e){return r.a.createElement(c,e,r.a.createElement(l,null),r.a.createElement(l,{animationDelay:.1}),r.a.createElement(l,{animationDelay:.2}))}s.defaultProps={className:void 0},t.a=s},1291:function(e,t,n){"use strict";var o=n(5),r=n.n(o),a=function(){return null};a.propTypes={id:r.a.string.isRequired,name:r.a.string.isRequired},t.a=a},1292:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),r=n.n(o);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,l(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.cancelFns=this.props.fns.map(function(e){return e()})}},{key:"componentWillUnmount",value:function(){this.cancelFns.forEach(function(e){return e()})}},{key:"render",value:function(){return null}}])&&i(n.prototype,o),a&&i(n,a),t}()},1293:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n(90),r=n.n(o),a=n(0),i=n.n(a);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(1).default.div.withConfig({displayName:"tooltip-wrapper__Tooltip",componentId:"sc-1khisxm-0"})(["background:",";border-radius:",";color:",";opacity:",";z-index:",";border:0;padding:8px;position:absolute;top:-33px;margin-left:-3px;transition:opacity 0.5s;white-space:nowrap;width:max-content;pointer-events:none;&:before{border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid ",";content:'';display:block;height:0;left:4px;position:absolute;top:32px;width:0;}"],function(e){return e.theme.colors.purple800},function(e){return e.theme.borderRadius.soft},function(e){return e.theme.colors.white},function(e){return e.active?.75:0},function(e){return e.theme.layers.tooltip},function(e){return e.theme.colors.purple800}),m=function(e){function t(e,n){var o,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=s(t).call(this,e,n),o=!a||"object"!==c(a)&&"function"!=typeof a?u(r):a,d(u(o),"handleMouseEnter",function(){o.props.showOnHover&&o.setState({hovered:!0})}),d(u(o),"handleMouseLeave",function(){o.setState({hovered:!1})}),o.state={hovered:!1},o}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,i.a.PureComponent),n=t,(o=[{key:"render",value:function(){var e=this,t=this.props,n=t.text,o=t.children,a=t.className,c=t.active,l=t.withComponent||"div";return i.a.createElement(l,{style:{display:"inline-block"},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,className:a},r()(o)?o(this.state.hovered,n):i.a.createElement(i.a.Fragment,null,i.a.createElement(f,{ref:function(t){e.tooltip=t},text:n,className:"tooltip",active:this.state.hovered||c}),o))}}])&&l(n.prototype,o),a&&l(n,a),t}()},1312:function(e,t,n){"use strict";var o=n(6),r=n.n(o),a=n(0),i=n.n(a),c=n(9),l=n(19),s=n.n(l),u=n(1),p=n(16),d=n(227),f=n(17),m=n(11),h=n(128),y=n(1213),b=n(1313);function g(e){return r()(e,["Event","serviceIDs"])||r()(e,["Event","metadata","spec","ServiceSpecs"])||r()(e,["Event","metadata","spec","spec","ServiceSpecs"])||Object.keys(r()(e,["Event","metadata","spec","spec"],{}))||[]}var v=u.default.div.withConfig({displayName:"flux-workload-history-item__EntryContent",componentId:"piylnm-0"})(["font-size:",";padding:12px 12px 12px 46px;position:relative;&:hover{opacity:0.9;}img{max-width:100%;}"],function(e){return e.theme.fontSizes.small}),w={automated:"fa fa-rocket fa-fw",autorelease:"fas fa-exchange-alt fa-fw",commit:"far fa-copy fa-fw",deautomated:"wc-stop-o",locked:"fa fa-lock fa-fw",release:"fas fa-exchange-alt fa-fw",sync:"fas fa-sync fa-fw",tag:"fa fa-filter fa-fw",unlocked:"fa fa-unlock fa-fw",untag:"fas fa-trash-alt-o fa-fw"},k={automated:"Automate",autorelease:"Automated deploy",commit:"Commit",deautomated:"Deautomate",locked:"Lock",release:"Manual deploy",sync:"Sync to cluster",tag:function(e){return i.a.createElement("span",null,"Add tag filter ",i.a.createElement("i",null,e)," to")},unlocked:"Unlock",untag:function(e){return i.a.createElement("span",null,"Remove tag filter ",i.a.createElement("i",null,e)," from")}};function O(e,t,n,o,a){var c=g(e)[0],l=Object(h.j)(e,c),u=l.type,y=l.param,v=r()(e,["Event","metadata","error"]),w=v?i.a.createElement("span",null,"Error: ",i.a.createElement("b",null,v),". Failed to ",u):function(e,t){var n=k[e];return"function"==typeof n?n(t):n}(u,y)||"",O=Object(h.f)(e),S=Object(h.g)(e),j=r()(e,["Event","metadata","spec","ImageSpec"]),E=v?{color:"red"}:null,_=function(e,t,n,o){var a=r()(t,["Event","metadata","revision"]),c=a?[{revision:a}]:r()(t,["Event","metadata","revisions"],[]).map(function(e){return{revision:e}});return(r()(t,["Event","metadata","commits"])||c).map(function(e){var t=e.revision,r=e.message;return i.a.createElement(b.a,{key:t,id:t,message:r,config:n,onClick:o})})}(0,e,n,a),C=function(e,t,n){return g(t).map(function(t){return t===p.FLUX_ALL_WORKLOADS?"all resources":i.a.createElement(s.a,{key:t,to:Object(m.p)(e,t),onClick:n},t)})}(t,e,o);return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("span",{style:E},w,":"),j&&" ".concat(j," to")," ",Object(f.n)(C,", ")," ",_.length>0&&i.a.createElement("span",null,"(",Object(f.n)(_,", "),")")),(S||O)&&i.a.createElement("div",null,O&&i.a.createElement(d.a,{text:O})," ",S&&i.a.createElement("span",null,"by ",Object(h.h)(S))))}t.a=function(e){var t=e.config,n=e.event,o=e.instanceId,r=e.workloadId,a=e.onWorkloadClick,l=e.onCommitClick,s=e.isoDate;return i.a.createElement(c.ListItem,{style:{padding:0}},i.a.createElement(v,{workloadId:r,event:n},Object(y.c)("".concat(function(e){var t=g(e)[0];return w[Object(h.j)(e,t).type]||""}(n)),{left:8,position:"absolute",top:12}),O(n,o,t,a,l),i.a.createElement(c.TimestampTag,{relative:!s,timestamp:n.Stamp})))}},1313:function(e,t,n){"use strict";var o=n(6),r=n.n(o),a=n(0),i=n.n(a);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){var e,n,o,r,a,i,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var p=arguments.length,d=new Array(p),f=0;f<p;f++)d[f]=arguments[f];return o=this,r=(e=s(t)).call.apply(e,[this].concat(d)),n=!r||"object"!==c(r)&&"function"!=typeof r?u(o):r,a=u(n),l=function(){n.props.onClick&&n.props.onClick()},(i="handleClick")in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,n}var n,o,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,a["PureComponent"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.id,n=e.config,o=e.message,a=t.substr(0,12),c=r()(n,["git","commitUrl"]),l=c?i.a.createElement("a",{href:"".concat(c).concat(t),target:"github"},a):a;return i.a.createElement("span",{title:o},l)}}])&&l(n.prototype,o),d&&l(n,d),t}();t.a=d},1376:function(e,t,n){"use strict";var o=n(46),r=n.n(o),a=n(189),i=n.n(a),c=n(14),l=n.n(c),s=n(188),u=n.n(s),p=n(0),d=n.n(p),f=n(22),m=n(9),h=n(190),y=n(2),b=n(411);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return o=this,r=(e=w(t)).call.apply(e,[this].concat(c)),n=!r||"object"!==g(r)&&"function"!=typeof r?k(o):r,S(k(n),"handleSearch",function(e,t){n.props.onChange(e,t),n.props.updateSearch(e,u()(l()(t,i.a)))}),S(k(n),"handleFilterSelect",function(e){n.props.updateSearch("",Object(b.b)(n.props.searchQueryString,e).split(" ")),n.props.onFilterSelect(e)}),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,d.a.Component),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.searchQuery,n=e.pinnedSearches,o=e.onFocus,r=e.onBlur,a=e.filters,i=e.ref;return d.a.createElement(m.Search,{onFocus:o,onBlur:r,ref:i,filters:a,query:t,pinnedTerms:n,onChange:this.handleSearch,onFilterSelect:this.handleFilterSelect})}}])&&v(n.prototype,o),r&&v(n,r),t}();S(j,"defaultProps",{onChange:r.a,onFilterSelect:r.a}),t.a=Object(f.connect)(function(e){var t=Object(h.c)(e),n=t.searchQuery;return{pinnedSearches:t.pinnedSearches,searchQuery:n,searchQueryString:Object(h.b)(e)}},{updateSearch:y.Wb})(j)},1377:function(e,t,n){"use strict";var o=n(6),r=n.n(o),a=n(0),i=n.n(a),c=n(15),l=n.n(c),s=n(1),u=n(22),p=n(13),d=n.n(p),f=n(7),m=n(16),h=n(11),y=n(111),b=n(2),g=n(1219),v=n(155),w=n(1266);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=s.default.span.withConfig({displayName:"workload-dashboards__LinkIcon",componentId:"sc-15vcgsm-0"})(["margin:6px;font-size:",";"],function(e){return e.theme.fontSizes.tiny}),C=s.default.span.withConfig({displayName:"workload-dashboards__LinkSpan",componentId:"sc-15vcgsm-1"})(["display:inline-block;margin-top:16px;"]),I=function(e){var t=e.text,n=e.href;return i.a.createElement(C,null,i.a.createElement("a",{onClick:function(){return Object(f.trackEvent)("workload.help.dashboard")},href:n,target:"_blank"},t,i.a.createElement(_,{className:"fas fa-external-link-alt","aria-hidden":"true"})))},P=s.default.div.withConfig({displayName:"workload-dashboards__Container",componentId:"sc-15vcgsm-2"})(["margin-bottom:40px;"]),T=function(e){function t(){var e,n,o,r,a,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,s=new Array(l),u=0;u<l;u++)s[u]=arguments[u];return o=this,n=!(r=(e=S(t)).call.apply(e,[this].concat(s)))||"object"!==k(r)&&"function"!=typeof r?j(o):r,a=j(n),c={loadingDashboards:!0},(i="state")in a?Object.defineProperty(a,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[i]=c,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,i.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.props.updateTimeStateFromUrl(this.props.location),this.updateDeploymentAnnotations(this.props),this.updateWorkloadDashboardsLayout(this.props),this.fetchWorkloadMetrics(this.props),this.redirectIfDashboardNotFound(this.props),Object(f.trackEvent)("prom.nav.workload-dashboard",{workloadId:this.props.workloadId})}},{key:"componentWillReceiveProps",value:function(e){e.location.search!==this.props.location.search&&this.props.updateTimeStateFromUrl(e.location),e.endTime===this.props.endTime&&e.startTime===this.props.startTime&&e.workloadId===this.props.workloadId||(this.updateDeploymentAnnotations(e),this.updateWorkloadDashboardsLayout(e),this.fetchWorkloadMetrics(e)),this.redirectIfDashboardNotFound(e)}},{key:"updateWorkloadDashboardsLayout",value:function(e){var t=this;if(e.workloadId!==m.FLUX_ALL_WORKLOADS){var n=this.props.loadWorkloadDashboards(e.instanceId,e.workloadId,{end:l()(e.endTime).unix(),start:l()(e.startTime).unix()});if(this.props.canary){var o=this.props.loadWorkloadDashboards(e.instanceId,"".concat(e.workloadId,"-primary"),{end:l()(e.endTime).unix(),start:l()(e.startTime).unix()});return void Promise.all([n,o]).then(function(){return t.setState({loadingDashboards:!1})})}n.then(function(){return t.setState({loadingDashboards:!1})})}}},{key:"fetchWorkloadMetrics",value:function(e){e.workloadId!==m.FLUX_ALL_WORKLOADS&&(this.props.loadWorkloadMetrics(e.instanceId,e.workloadId,{end:l()(e.endTime).unix()}),this.props.canary&&this.props.loadWorkloadMetrics(e.instanceId,"".concat(e.workloadId,"-primary"),{end:l()(e.endTime).unix()}))}},{key:"updateDeploymentAnnotations",value:function(e){this.props.getFluxHistory(e.instanceId,e.workloadId,null,e.endTime,!1,e.startTime)}},{key:"redirectIfDashboardNotFound",value:function(e){var t=e.instanceId,n=e.workloadId,o=e.sharedQueryParams,r=e.dashboardId,a=e.dashboardIds;this.state.loadingDashboards||a&&!a.includes(r)&&d.a.replace(Object(h.Z)(o,t,n,"summary"))}},{key:"render",value:function(){return this.state.loadingDashboards?i.a.createElement(v.a,{text:"Loading dashboards..."}):i.a.createElement(P,null,i.a.createElement(w.b,{selectedTabId:this.props.dashboardId,onSelectedTabChange:this.props.onSelectedTabChange},this.props.children),this.props.dashboardIds&&this.props.dashboardIds.length<=2&&i.a.createElement(I,{text:"Learn about automatic dashboards",href:"https://www.weave.works/docs/cloud/latest/tasks/monitor/workload-dashboards/"}))}}])&&O(n.prototype,o),r&&O(n,r),t}();t.a=Object(u.connect)(function(e,t){var n=t.instanceId;return{canary:r()(e,["root","urlQuery","canary"],!1),endTime:Object(g.d)(e),instance:r()(e,["root","instances",n]),sharedQueryParams:Object(y.b)(e),startTime:Object(g.f)(e)}},{getFluxHistory:b.A,loadWorkloadDashboards:b.Z,loadWorkloadMetrics:b.bb,updateTimeStateFromUrl:b.Xb})(T)},1378:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return f});var o=n(304),r=n.n(o),a=n(0),i=n.n(a),c=n(1),l=n(1290),s="This is a system workload. It is considered\nread-only by Weave Cloud and its deploy status is not tracked",u=c.default.div.withConfig({displayName:"deploy-status__Container",componentId:"sc-1ljt4xb-0"})(["display:flex;"]),p=c.default.i.withConfig({displayName:"deploy-status__Icon",componentId:"sc-1ljt4xb-1"})(["color:",";"],function(e){var t=e.status,n=e.theme;return t?n.colors.green500:n.colors.purple400}),d=c.default.span.withConfig({displayName:"deploy-status__Label",componentId:"sc-1ljt4xb-2"})(["margin-left:6px;"]);function f(e){var t=e.workload,n=r()(t.Status),o=n?"fa fa-circle":"fa fa-minus";return i.a.createElement(u,{title:n||s},t.updating?i.a.createElement(i.a.Fragment,null,i.a.createElement(l.a,null)," ",i.a.createElement(d,null,"Deploying...")):i.a.createElement(i.a.Fragment,null,i.a.createElement(p,{status:n,className:"fa-fw ".concat(o)})," ",i.a.createElement(d,null,n||"Not tracked")))}},1470:function(e,t,n){"use strict";var o=n(6),r=n.n(o),a=n(0),i=n.n(a),c=n(1),l=function(e){return[{name:"Weight",rows:[{panels:[{legendShown:!1,query:'sum(flagger_canary_weight{workload="'.concat(e,'-primary"}) by (workload, namespace)'),title:"",type:"line",unit:{explanation:"",format:"numeric"},valuesMinSpread:100}]}]},{name:"Incoming request volume",rows:[{panels:[{legendShown:!1,query:'round(sum(rate(istio_requests_total{reporter="destination",destination_workload=~"'.concat(e,'-primary"}[30s])) by (destination_workload), 0.001)'),title:"",type:"line",unit:{explanation:"",format:"numeric"},valuesMinSpread:100}]}]}]},s=function(e){return[{name:"Weight",rows:[{panels:[{legendShown:!1,query:'sum(flagger_canary_weight{workload="'.concat(e,'-primary"}) by (workload, namespace)'),title:"",type:"line",unit:{explanation:"",format:"numeric"},valuesMinSpread:100}]}]},{name:"Incoming request volume",rows:[{panels:[{legendShown:!1,query:'round(sum(rate(envoy_cluster_upstream_rq{kubernetes_pod_name=~"'.concat(e,'-primary-[0-9a-zA-Z]+(-[0-9a-zA-Z]+)"}[30s])) by (kubernetes_namespace), 0.001)'),title:"",type:"line",unit:{explanation:"",format:"numeric"},valuesMinSpread:100}]}]}]},u=n(76),p=n(22),d=n(9),f=n(1293),m=n(1268),h=n(7);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=c.default.div.withConfig({displayName:"workload-chart__ChartWrapper",componentId:"sc-1mu10nx-0"})(["box-sizing:border-box;width:100%;"]),S=c.default.div.withConfig({displayName:"workload-chart__ChartHeader",componentId:"sc-1mu10nx-1"})(["display:flex;align-items:flex-end;justify-content:center;position:relative;height:30px;margin-bottom:10px;"]),j=c.default.h3.withConfig({displayName:"workload-chart__ChartTitle",componentId:"sc-1mu10nx-2"})(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;padding:0 5px;margin:0;"]),E=c.default.span.withConfig({displayName:"workload-chart__ChartTitleSpinner",componentId:"sc-1mu10nx-3"})(["display:flex;justify-content:center;width:25px;"]),_=c.default.span.withConfig({displayName:"workload-chart__ChartHelpIcon",componentId:"sc-1mu10nx-4"})(["color:",";font-size:",";cursor:pointer;padding:3px;opacity:0.75;"],function(e){return e.theme.colors.purple400},function(e){return e.theme.fontSizes.small}),C=function(e){function t(e,n){var o,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=g(t).call(this,e,n),o=!a||"object"!==y(a)&&"function"!=typeof a?v(r):a,k(v(o),"handleRefreshStart",function(){o.setState({isRefreshing:!0})}),k(v(o),"handleRefreshFinish",function(){o.setState({isRefreshing:!1})}),k(v(o),"handleReceiveSuccess",function(e){var t=e.isFirstLoading,n=e.responseTime;Object(h.trackUserTiming)("prom.workloads.dashboard.querySuccessTime",n,"Dashboard query time",{chartTitle:o.props.title,initialQuery:t,instanceId:o.props.instanceId,workloadId:o.props.workloadId})}),k(v(o),"handleReceiveError",function(e){var t=e.error,n=e.isFirstLoading,r=e.responseTime;Object(h.trackUserTiming)("prom.workloads.dashboard.queryErrorTime",r,"Dashboard query time",{chartTitle:o.props.title,error:t,initialQuery:n,instanceId:o.props.instanceId,workloadId:o.props.workloadId})}),o.state={isRefreshing:!1},o}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,i.a.Component),n=t,(o=[{key:"render",value:function(){return i.a.createElement(O,null,i.a.createElement(S,null,i.a.createElement(E,null,this.state.isRefreshing&&i.a.createElement(d.CircularProgress,{size:"small"})),i.a.createElement(j,null,this.props.title),this.props.help&&i.a.createElement(f.a,{showOnHover:!0,text:this.props.help},i.a.createElement(_,{className:"fa fa-info-circle"}))),i.a.createElement(m.a,{simpleTooltip:!0,instanceId:this.props.instanceId,query:this.props.query,startTimeSec:this.props.startTime,endTimeSec:this.props.endTime,stepDurationSec:this.props.queryStepSeconds,yAxisLabel:this.props.yAxisLabel,metricUnits:this.props.metricUnits,valuesMinSpread:this.props.valuesMinSpread,legendShown:this.props.legendShown,getSeriesName:this.props.getLabel,showStacked:this.props.showStacked,colorTheme:this.props.colorTheme,deployments:this.props.deployments,onRefreshStart:this.handleRefreshStart,onRefreshFinish:this.handleRefreshFinish,onReceiveSuccess:this.handleReceiveSuccess,onReceiveError:this.handleReceiveError}))}}])&&b(n.prototype,o),r&&b(n,r),t}();var I=Object(p.connect)(function(e,t){var n=t.instanceId,o=t.workloadId;return{deployments:Object(u.a)(e,n,o)}})(C);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function x(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",function(){return G});var R=c.default.div.withConfig({displayName:"workload-dashboard__DashboardWrapper",componentId:"sc-1lonexe-0"})([""]),D=c.default.div.withConfig({displayName:"workload-dashboard__SectionWrap",componentId:"sc-1lonexe-1"})(["",";"],function(e){return e.twoColumn&&"\n    display: flex;\n\n    & > div {\n      flex: 1 1 50%;\n    }\n  "}),W=c.default.div.withConfig({displayName:"workload-dashboard__Section",componentId:"sc-1lonexe-2"})(["margin:15px 0 50px;&:last-child{margin-bottom:0;}"]),A=c.default.h2.withConfig({displayName:"workload-dashboard__SectionTitle",componentId:"sc-1lonexe-3"})(["margin:0 0 6px;padding-left:25px;text-align:center;"]),U=c.default.div.withConfig({displayName:"workload-dashboard__SectionContainer",componentId:"sc-1lonexe-4"})(["border-radius:",";background-color:",";padding:0 20px;"],function(e){return e.theme.borderRadius.soft},function(e){return e.theme.colors.white}),F=c.default.div.withConfig({displayName:"workload-dashboard__Row",componentId:"sc-1lonexe-5"})(["",";"],function(e){return!e.singleColumn&&"\n      display: flex;\n    "}),q=c.default.span.withConfig({displayName:"workload-dashboard__Panel",componentId:"sc-1lonexe-6"})(["width:100%;margin:5px 0 20px;&:not(:last-child){margin-right:50px;}"]),z=function(e,t){return e.replace("".concat(t,"-primary"),t)};function B(e,t){return[t.name,e.title].filter(Boolean).join(" - ")}var G=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),x(this,N(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,i.a.Component),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.canary,n=e.canaryAppMesh,o=e.dashboard,a=e.instanceId,c=e.workloadId,p=Object(u.b)(c).workloadName,d=function(e,t,n,o){return n&&o&&"cadvisor-resources"===t.id?[].concat(M(s(e)),M(t.sections)):n&&"cadvisor-resources"===t.id?[].concat(M(l(e)),M(t.sections)):t.sections}(p,o,t,n),f=t&&Math.round(Date.now()/1e3)-600;return i.a.createElement(R,null,d.map(function(e,n){return i.a.createElement(D,{key:e.name,twoColumn:t},t&&i.a.createElement(W,{key:"".concat(e.name,"-primary")},0===n&&i.a.createElement(A,null,"Primary"),i.a.createElement(U,null,e.rows.map(function(n,o){var l=r()(n,"panels[0].title",o);return i.a.createElement(F,{key:l,singleColumn:t},n.panels.map(function(t){return i.a.createElement(q,{key:"".concat(t.title,"-primary")},i.a.createElement(I,{title:B(t,e),help:t.help,query:t.query,legendShown:t.legendShown,instanceId:a,workloadId:"".concat(c,"-primary"),startTime:f,metricUnits:t.unit.format,showStacked:"stacked-area"===t.type}))}))}))),i.a.createElement(W,{key:e.name},0===n&&t&&i.a.createElement(A,null,"Canary"),i.a.createElement(U,null,e.rows.map(function(n,o){var l=r()(n,"panels[0].title",o);return i.a.createElement(F,{key:l,singleColumn:t},n.panels.map(function(t){return i.a.createElement(q,{key:t.title},i.a.createElement(I,{title:B(t,e),help:t.help,legendShown:t.legendShown,query:z(t.query,p),valuesMinSpread:t.valuesMinSpread,instanceId:a,startTime:f,workloadId:c,metricUnits:t.unit.format,showStacked:"stacked-area"===t.type}))}))}))))}))}}])&&T(n.prototype,o),a&&T(n,a),t}()},2376:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(192),i=n.n(a),c=n(20),l=n.n(c),s=n(31),u=n.n(s),p=n(6),d=n.n(p),f=n(1),m=n(22),h=n(13),y=n.n(h),b=n(9),g=n(409),v=n(11),w=n(2),k=n(159),O=n(158),S=n(1221),j=n(1219),E=n(111),_=n(23),C=n(411),I=n(76),P=n(223),T=n(190),x=Object(_.createSelector)([function(e){return d()(e,["root","workloadIds"])},function(e){return d()(e,["root","urlParams","instanceId"])}],function(e,t){return(e[t]||{}).list||[]}),N=Object(_.createSelector)([function(e){return d()(e,["root","workloadIds"])},function(e){return d()(e,["root","urlParams","instanceId"])}],function(e,t){return Boolean((e[t]||{}).list)}),L=Object(_.createSelector)([function(e){return d()(e,["root","workloadsPodCount"])},function(e){return d()(e,["root","urlParams","instanceId"])}],function(e,t){return d()(e[t],"data")}),M=Object(_.createSelector)([function(e){return d()(e,["root","workloadsCpuUsage"])},function(e){return d()(e,["root","urlParams","instanceId"])}],function(e,t){return d()(e[t],"data")}),R=Object(_.createSelector)([function(e){return d()(e,["root","workloadsMemoryUsage"])},function(e){return d()(e,["root","urlParams","instanceId"])}],function(e,t){return d()(e[t],"data")}),D=Object(_.createSelector)([function(e){return d()(e,["root","workloadsIncomingTraffic"])},function(e){return d()(e,["root","urlParams","instanceId"])}],function(e,t){return d()(e[t],"data")}),W=Object(_.createSelector)([function(e){return d()(e,["root","workloadsOutgoingTraffic"])},function(e){return d()(e,["root","urlParams","instanceId"])}],function(e,t){return d()(e[t],"data")}),A=Object(_.createSelector)([x,L,M,R,D,W,P.m],function(e,t,n,o,r,a,i){var c=function(e,t){var n=Object(I.b)(t),o=n.namespace,r=n.workloadName;return d()(e,[o,r])};return e.map(function(e){return{cpuUsage:c(n,e),deployStatus:i[e]||{},incomingTraffic:c(r,e),memoryUsage:c(o,e),outgoingTraffic:c(a,e),podCount:c(t,e),workloadId:e}})}),U=Object(_.createSelector)([A,T.a],function(e,t){return e.filter(function(e){return Object(C.c)(e,t)})});function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H=f.default.div.withConfig({displayName:"workloads-page__TimeTravelSlot",componentId:"sc-1f8j2jr-0"})(["margin:15px -28px 0;"]),Z=f.default.div.withConfig({displayName:"workloads-page__FlexContainer",componentId:"sc-1f8j2jr-1"})(["width:100%;margin-bottom:24px;flex:1;display:flex;flex-direction:row;align-items:stretch;"]),V=f.default.div.withConfig({displayName:"workloads-page__MainContent",componentId:"sc-1f8j2jr-2"})(["flex:1;min-width:1008px;margin:0;"]),K=f.default.div.withConfig({displayName:"workloads-page__Spacer",componentId:"sc-1f8j2jr-3"})(["max-width:4%;flex:1;"]),X=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return o=this,r=(e=z(t)).call.apply(e,[this].concat(i)),n=!r||"object"!==F(r)&&"function"!=typeof r?B(o):r,Q(B(n),"state",{notFoundAlertVisible:!1,notFoundWorkloadId:""}),Q(B(n),"redirectToWorkloadsOverviewIfNotFound",function(e){var t=e.instanceId,o=e.workloadId,r=e.workloadsIds,a=e.receivedWorkloadsIds,i=e.sharedQueryParams;o&&a&&!r.includes(o)&&(n.setState({notFoundAlertVisible:!0,notFoundWorkloadId:o}),y.a.replace(Object(v.ab)(i,t)))}),Q(B(n),"closeAlertNotFound",function(){n.setState({notFoundAlertVisible:!1})}),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.props.updateTimeStateFromUrl(this.props.location),this.props.loadWorkloadIds(this.props.instanceId,this.props.selectedTimeSec),this.redirectToWorkloadsOverviewIfNotFound(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.location.search!==this.props.location.search&&this.props.updateTimeStateFromUrl(e.location),e.instanceId===this.props.instanceId&&e.selectedTimeSec===this.props.selectedTimeSec||this.props.loadWorkloadIds(e.instanceId,e.selectedTimeSec),e.instanceId===this.props.instanceId&&e.receivedWorkloadsIds===this.props.receivedWorkloadsIds||this.redirectToWorkloadsOverviewIfNotFound(e)}},{key:"render",value:function(){var e=this.props,t=e.instanceId,n=e.workloadId,o=e.dashboardId,a=e.location,i=n&&!["summary","metrics"].includes(o);return r.a.createElement(k.a,{page:"workloads",instanceId:t},r.a.createElement(Z,null,r.a.createElement(K,null),r.a.createElement(g.a,null,r.a.createElement(b.Alert,{type:"warning",visible:this.state.notFoundAlertVisible,onClose:this.closeAlertNotFound},"Workload ",r.a.createElement("b",null,this.state.notFoundWorkloadId)," is missing in this instance!")),r.a.createElement(V,null,r.a.createElement(H,null,r.a.createElement(S.a,{instanceId:t,workloadId:n,location:a,hasRangeSelector:i})),this.props.children),r.a.createElement(K,null)))}}])&&q(n.prototype,o),a&&q(n,a),t}();var $=Object(m.connect)(function(e,t){var n=t.params,o=n.instanceId,r=n.workloadId;return{dashboardId:n.dashboardId,instanceId:o,receivedWorkloadsIds:d()(e,["root","workloadIds",o,"received"]),selectedTimeSec:Object(j.a)(e),sharedQueryParams:Object(E.b)(e),workloadId:r,workloadsIds:x(e)}},{loadWorkloadIds:w.ab,updateTimeStateFromUrl:w.Xb})(Object(O.a)(X)),Y=n(1376),J=n(126),ee=n.n(J),te=n(32),ne=n.n(te),oe=n(638),re=n.n(oe),ae=n(386),ie=n.n(ae),ce=n(127),le=n.n(ce),se=n(15),ue=n.n(se),pe=n(64),de=n(155),fe=n(18),me=n.n(fe),he=n(45),ye=Object(f.keyframes)(["50%{opacity:1;}75%{opacity:0.4;}100%{opacity:1;}"]),be={background:me.a.colors.purple25,cellBorder:Object(he.transparentize)(.6,me.a.colors.gray200),grayText:me.a.colors.gray600,highlight:me.a.colors.blue700,loadingAnimation:Object(f.css)(["","2.5s infinite"],ye)};function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function ve(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var we=f.default.div.withConfig({displayName:"workloads-table-headers__TableContainer",componentId:"vr1f8t-0"})(["margin-top:20px;"]),ke=f.default.table.withConfig({displayName:"workloads-table-headers__Table",componentId:"vr1f8t-1"})(["border-collapse:collapse;width:100%;table-layout:fixed;"]),Oe=f.default.tbody.withConfig({displayName:"workloads-table-headers__HeaderBody",componentId:"vr1f8t-2"})(["border-left:3px solid transparent;border-bottom:1px solid ",";"],be.cellBorder),Se=f.default.th.withConfig({displayName:"workloads-table-headers__HeaderContainer",componentId:"vr1f8t-3"})(["font-size:",";font-weight:normal;padding:10px 16px 10px 8px;width:",";text-align:",";",";"],function(e){return e.theme.fontSizes.small},function(e){return e.width},function(e){return e.rightAlign?"right":"left"},function(e){return e.loading&&Object(f.css)(["animation:",";"],be.loadingAnimation)}),je=Object(f.default)(Se).withConfig({displayName:"workloads-table-headers__SortableHeaderContainer",componentId:"vr1f8t-4"})(["cursor:pointer;&:hover{color:",";}"],be.highlight),Ee=f.default.i.withConfig({displayName:"workloads-table-headers__CaretIcon",componentId:"vr1f8t-5"})(["color:",";font-size:",";"],be.highlight,function(e){return e.theme.fontSizes.normal}),_e=function(e){return e.desc?r.a.createElement(Ee,{className:"fa fa-caret-down"}):r.a.createElement(Ee,{className:"fa fa-caret-up"})},Ce=function(e){var t=e.onHeaderClick,n=e.sortedDesc,o=e.sortedBy,a=e.value,i=ve(e,["onHeaderClick","sortedDesc","sortedBy","value"]);return r.a.createElement(je,ge({onClick:function(){return t(a)}},i),a," ",a===o&&r.a.createElement(_e,{desc:n}))},Ie=function(e){return r.a.createElement(we,null,r.a.createElement(ke,null,r.a.createElement(Oe,null,r.a.createElement("tr",null,r.a.createElement(Ce,ge({value:"Workloads",width:"35%",loading:e.workloadsLoading},e)),r.a.createElement(Ce,ge({value:"Pods",width:"5%",loading:e.podCountLoading},e)),r.a.createElement(Ce,ge({value:"CPU",width:"7.5%",rightAlign:!0,loading:e.cpuUsageLoading},e)),r.a.createElement(Ce,ge({value:"Memory",width:"10%",rightAlign:!0,loading:e.memoryUsageLoading},e)),r.a.createElement(Ce,ge({value:"Incoming",width:"10%",rightAlign:!0,loading:e.incomingTrafficLoading},e)),r.a.createElement(Ce,ge({value:"Outgoing",width:"10%",rightAlign:!0,loading:e.outgoingTrafficLoading},e)),r.a.createElement(Se,{width:"7.5%"}),r.a.createElement(Se,{width:"120px"}))),r.a.createElement("tbody",null,e.children)))},Pe=n(5),Te=n.n(Pe),xe=n(307),Ne=n(1238),Le=n(1290);function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function De(e,t){return!t||"object"!==Me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ue=f.default.div.withConfig({displayName:"workloads-table-item-deploy-status__StatusWrapper",componentId:"sc-19u2f8u-0"})(["display:flex;font-size:",";align-items:center;"],function(e){return e.theme.fontSizes.small}),Fe=f.default.i.withConfig({displayName:"workloads-table-item-deploy-status__Icon",componentId:"sc-19u2f8u-1"})(["width:18px;text-align:right;margin-right:13px;"]),qe=Object(f.default)(Le.a).withConfig({displayName:"workloads-table-item-deploy-status__BarProgressIcon",componentId:"sc-19u2f8u-2"})(["margin-right:6px;"]),ze=Object(f.default)(Fe).withConfig({displayName:"workloads-table-item-deploy-status__LockedIconTemplate",componentId:"sc-19u2f8u-3"})(["color:",";font-size:",";"],be.lockedTag,function(e){return e.theme.fontSizes.normal}),Be=Object(f.default)(Fe).withConfig({displayName:"workloads-table-item-deploy-status__AutomatedIconTemplate",componentId:"sc-19u2f8u-4"})(["color:",";font-size:",";"],be.upToDateTag,function(e){return e.theme.fontSizes.normal}),Ge=function(){return r.a.createElement(ze,{className:"fa fa-lock"})},Qe=function(){return r.a.createElement(Be,{className:"fa fa-rocket"})},He=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),De(this,We(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(t,r.a.PureComponent),n=t,(o=[{key:"render",value:function(){return this.props.ready?this.props.updating?r.a.createElement(Ue,null,r.a.createElement(qe,null)," Deploying..."):this.props.Locked?r.a.createElement(Ue,null,r.a.createElement(Ge,null)," Locked"):this.props.Automated?r.a.createElement(Ue,null,r.a.createElement(Qe,null)," Automated"):null:"-"}}])&&Re(n.prototype,o),a&&Re(n,a),t}();function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(){return(Ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Ke(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Xe(e){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Je=f.default.tr.withConfig({displayName:"workloads-table-item__WorkloadRow",componentId:"sc-1ww66dl-0"})(["cursor:pointer;border-bottom:1px solid ",";border-left:3px solid transparent;&:hover{background-color:",";}"],be.cellBorder,function(e){return e.theme.colors.white}),et=f.default.td.withConfig({displayName:"workloads-table-item__Cell",componentId:"sc-1ww66dl-1"})(["padding:10px 16px 10px 8px;font-size:",";text-align:",";",";"],function(e){return e.theme.fontSizes.normal},function(e){return e.rightAlign?"right":"left"},function(e){return e.loading&&Object(f.css)(["animation:",";"],be.loadingAnimation)}),tt=Object(f.default)(et).withConfig({displayName:"workloads-table-item__LabelCell",componentId:"sc-1ww66dl-2"})(["",":hover &,",":hover & a{color:",";}"],Je,Je,be.highlight);function nt(e){return null===e?"-":Object(xe.format)(".2%")(e)}function ot(e){if(null===e)return"-";var t=[{label:"TB",unit:1099511627776},{label:"GB",unit:1073741824},{label:"MB",unit:1048576},{label:"kB",unit:1024}].find(function(t){var n=t.unit;return e>=n})||{label:"B",unit:1};return"".concat(Object(xe.format)(".1f")(e/t.unit)," ").concat(t.label,"/s")}var rt=function(e){function t(){var e,n,o,r,a,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,s=new Array(l),u=0;u<l;u++)s[u]=arguments[u];return o=this,r=(e=Xe(t)).call.apply(e,[this].concat(s)),n=!r||"object"!==Ze(r)&&"function"!=typeof r?$e(o):r,a=$e(n),c=function(){n.props.onClick(n.props.workloadId)},(i="handleWorkloadClick")in a?Object.defineProperty(a,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[i]=c,n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(t,r.a.PureComponent),n=t,(o=[{key:"render",value:function(){var e,t=this.props,n=t.workloadId,o=t.searchTerms,a=t.deployStatus;return r.a.createElement(Je,{onClick:this.handleWorkloadClick,title:"Click to see more details for ".concat(n)},r.a.createElement(tt,{loading:this.props.workloadsLoading},ne()(o)?r.a.createElement(Ne.a,{highlighted:!0,value:n}):r.a.createElement(b.MatchedText,{text:n,matches:o})),r.a.createElement(et,{loading:this.props.podCountLoading},null===(e=this.props.podCount)?"-":e),r.a.createElement(et,{loading:this.props.cpuUsageLoading,rightAlign:!0},nt(this.props.cpuUsage)),r.a.createElement(et,{loading:this.props.memoryUsageLoading,rightAlign:!0},nt(this.props.memoryUsage)),r.a.createElement(et,{loading:this.props.incomingTrafficLoading,rightAlign:!0},ot(this.props.incomingTraffic)),r.a.createElement(et,{loading:this.props.outgoingTrafficLoading,rightAlign:!0},ot(this.props.outgoingTraffic)),r.a.createElement(et,null),r.a.createElement(et,null,r.a.createElement(He,Ve({ready:!ne()(a)},a))))}}])&&Ke(n.prototype,o),a&&Ke(n,a),t}();rt.propTypes={cpuUsage:Te.a.number,cpuUsageLoading:Te.a.bool.isRequired,deployStatus:Te.a.shape({Automated:Te.a.bool,Locked:Te.a.bool,updating:Te.a.bool}),incomingTraffic:Te.a.number,incomingTrafficLoading:Te.a.bool.isRequired,memoryUsage:Te.a.number,memoryUsageLoading:Te.a.bool.isRequired,onClick:Te.a.func.isRequired,outgoingTraffic:Te.a.number,outgoingTrafficLoading:Te.a.bool.isRequired,podCount:Te.a.number,podCountLoading:Te.a.bool.isRequired,searchTerms:Te.a.arrayOf(Te.a.string),workloadId:Te.a.string.isRequired,workloadsLoading:Te.a.bool.isRequired},rt.defaultProps={cpuUsage:null,deployStatus:{},incomingTraffic:null,memoryUsage:null,outgoingTraffic:null,podCount:null,searchTerms:[]};var at=rt;function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(){return(ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function lt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function st(e){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pt(e,t){return(pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ft=["Pods","CPU","Memory","Incoming","Outgoing"],mt=function(e){return re()(e)?e:-1/0},ht=f.default.div.withConfig({displayName:"workloads-table__ErrorContainer",componentId:"ri064c-0"})(["color:",";font-size:",";display:block;margin:200px 0;text-align:center;"],function(e){return e.theme.colors.orange500},function(e){return e.theme.fontSizes.normal}),yt=f.default.div.withConfig({displayName:"workloads-table__WorkloadsNotFound",componentId:"ri064c-1"})(["font-size:",";padding:12px;"],function(e){return e.theme.fontSizes.small}),bt=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return o=this,r=(e=st(t)).call.apply(e,[this].concat(i)),n=!r||"object"!==it(r)&&"function"!=typeof r?ut(o):r,dt(ut(n),"state",{sortedBy:"Workloads",sortedDesc:!1}),dt(ut(n),"reloadWorkloadsStatus",function(e){var t=e.timestamp,n=e.instanceId,o=e.podCountLoading,r=e.cpuUsageLoading,a=e.memoryUsageLoading,i=e.incomingTrafficLoading,c=e.outgoingTrafficLoading;o||e.loadWorkloadsPodCount(n,t),r||e.loadWorkloadsCpuUsage(n,t),a||e.loadWorkloadsMemoryUsage(n,t),i||e.loadWorkloadsIncomingTraffic(n,t),c||e.loadWorkloadsOutgoingTraffic(n,t)}),dt(ut(n),"handleWorkloadClick",function(e){var t=n.props,o=t.sharedQueryParams,r=t.instanceId,a=Object(v.Z)(o,r,e);y.a.push(a)}),dt(ut(n),"handleHeaderClick",function(e){if(n.state.sortedBy===e)n.setState({sortedDesc:!n.state.sortedDesc});else{var t=ft.includes(e);n.setState({sortedBy:e,sortedDesc:t})}}),dt(ut(n),"getInfo",function(e,t){var n=Object(I.b)(t),o=n.namespace,r=n.workloadName;return d()(e,[o,r])}),dt(ut(n),"sortedWorkloads",function(e){var t=e.workloads,o=le()(t,function(e){var t=e.deployStatus,o=t.Automated,r=t.Locked,a=t.upToDate;switch(n.state.sortedBy){case"Pods":return mt(e.podCount);case"CPU":return mt(e.cpuUsage);case"Memory":return mt(e.memoryUsage);case"Incoming":return mt(e.incomingTraffic);case"Outgoing":return mt(e.outgoingTraffic);case"Status":return o?4:r?2:a?3:1;default:return e.workloadId}});return n.state.sortedDesc&&(o=ie()(o)),o}),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.props.timestamp&&this.reloadWorkloadsStatus(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.timestamp!==this.props.timestamp&&this.reloadWorkloadsStatus(e)}},{key:"renderLoadingOrError",value:function(){var e=this.props,t=e.error,n=e.hasLoadedWorkloads,o=e.loading;if(!n){if(o)return r.a.createElement(de.a,null);if(t)return r.a.createElement(ht,null,"Failed to load the list of workloads. Retrying...")}return null}},{key:"render",value:function(){var e=this,t=this.sortedWorkloads(this.props),n=ee()(this.props,["workloadsLoading","podCountLoading","cpuUsageLoading","memoryUsageLoading","incomingTrafficLoading","outgoingTrafficLoading"]);return this.renderLoadingOrError()||r.a.createElement(r.a.Fragment,null,r.a.createElement(Ie,ct({sortedBy:this.state.sortedBy,sortedDesc:this.state.sortedDesc,onHeaderClick:this.handleHeaderClick,instanceId:this.props.instanceId},n),t.map(function(t){return r.a.createElement(at,ct({key:t.workloadId,instanceId:e.props.instanceId,onClick:e.handleWorkloadClick,searchTerms:e.props.searchQueryTerms},n,t))})),ne()(t)&&r.a.createElement(yt,null,"No workloads"," ",this.props.searchQueryAsString?'matching "'.concat(this.props.searchQueryAsString,'"'):"found"))}}])&&lt(n.prototype,o),a&&lt(n,a),t}();var gt=Object(m.connect)(function(e,t){var n=t.instanceId,o=t.searchDisabled,r=t.limitWorkloadIds,a=Object(pe.e)(n)(e),i=a.error,c=a.loading,l=o?A(e):U(e),s=r&&l.filter(function(e){return r.includes(e.workloadId)}),u=Object(T.b)(e),p=Object(T.d)(e),f=Object(E.b)(e);return{cpuUsageLoading:d()(e,["root","workloadsCpuUsage",n,"loading"],!1),error:i,hasLoadedWorkloads:N(e),incomingTrafficLoading:d()(e,["root","workloadsIncomingTraffic",n,"loading"],!1),instanceId:n,loading:c,memoryUsageLoading:d()(e,["root","workloadsMemoryUsage",n,"loading"],!1),outgoingTrafficLoading:d()(e,["root","workloadsOutgoingTraffic",n,"loading"],!1),podCountLoading:d()(e,["root","workloadsPodCount",n,"loading"],!1),searchQueryAsString:o?"":u,searchQueryTerms:o?[]:p,sharedQueryParams:f,timestamp:ue()(f.timestamp).unix(),workloads:s||l,workloadsLoading:d()(e,["root","workloadIds",n,"loading"],!1)}},{loadWorkloadsCpuUsage:w.cb,loadWorkloadsIncomingTraffic:w.db,loadWorkloadsMemoryUsage:w.eb,loadWorkloadsOutgoingTraffic:w.fb,loadWorkloadsPodCount:w.gb,updateTimeStateFromUrl:w.Xb})(bt),vt=f.default.div.withConfig({displayName:"workloads-overview__WorkloadsHeader",componentId:"u531kj-0"})(["max-width:700px;margin-top:40px;"]),wt=function(e){var t=e.params.instanceId;return r.a.createElement(r.a.Fragment,null,r.a.createElement(vt,null,r.a.createElement(Y.a,null)),r.a.createElement(gt,{instanceId:t}))},kt=n(14),Ot=n.n(kt),St=n(1291),jt=n(1377),Et=n(1292),_t=n(1378),Ct=n(19),It=n.n(Ct),Pt=f.default.div.withConfig({displayName:"components__Summary",componentId:"hxvkgf-0"})(["display:flex;flex-wrap:wrap;margin:0 15px;"]),Tt=f.default.div.withConfig({displayName:"components__Section",componentId:"hxvkgf-1"})(["margin:15px;flex-grow:1;",""],function(e){return e.fullWidth&&"width: 100%;"}),xt=f.default.div.withConfig({displayName:"components__SectionHeader",componentId:"hxvkgf-2"})(["font-size:",";color:",";margin-bottom:20px;"],function(e){return e.theme.fontSizes.large},function(e){return e.theme.colors.purple600}),Nt=f.default.i.withConfig({displayName:"components__Icon",componentId:"hxvkgf-3"})(["font-size:",";margin-left:8px;margin-top:2px;"],function(e){return e.theme.fontSizes.tiny}),Lt=function(){return r.a.createElement(Nt,{className:"fa fa-chevron-right"})},Mt=f.default.div.withConfig({displayName:"components__DialWrapper",componentId:"hxvkgf-4"})(["display:inline-block;margin-right:30px;margin-bottom:30px;"]),Rt=f.default.span.withConfig({displayName:"components__Info",componentId:"hxvkgf-5"})(["font-style:italic;"]),Dt=Object(f.default)(It.a).withConfig({displayName:"components__HeaderLink",componentId:"hxvkgf-6"})(["display:flex;align-items:center;padding:3px;margin:-3px;"]),Wt=f.default.div.withConfig({displayName:"workload-summary-deploy-status__SectionContent",componentId:"vvc6yr-0"})(["margin-right:30px;"]);var At=Object(m.connect)(function(e,t){var n=t.workloadId;return{workload:P.m(e)[n]||{}}},{pollFluxWorkloads:w.nb})(function(e){var t=e.instanceId,n=e.workload,o=e.pollFluxWorkloads;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Et.a,{fns:[function(){return o(t)}]}),r.a.createElement(Tt,null,r.a.createElement(xt,null,"Status"),r.a.createElement(Wt,null,r.a.createElement(_t.b,{workload:n}))))}),Ut=n(46),Ft=n.n(Ut),qt=n(85),zt=n.n(qt),Bt=n(102),Gt=n.n(Bt),Qt=n(49),Ht=n.n(Qt),Zt=n(89),Vt=n.n(Zt),Kt=n(113),Xt=n.n(Kt),$t=n(78),Yt=n.n($t),Jt=n(39),en=n.n(Jt),tn=n(416),nn=n.n(tn),on=n(226),rn=n.n(on),an=n(7),cn=n(8),ln=n(1267),sn=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function un(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function pn(){}var dn="\\s*([+-]?\\d+)\\s*",fn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",mn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hn=/^#([0-9a-f]{3})$/,yn=/^#([0-9a-f]{6})$/,bn=new RegExp("^rgb\\("+[dn,dn,dn]+"\\)$"),gn=new RegExp("^rgb\\("+[mn,mn,mn]+"\\)$"),vn=new RegExp("^rgba\\("+[dn,dn,dn,fn]+"\\)$"),wn=new RegExp("^rgba\\("+[mn,mn,mn,fn]+"\\)$"),kn=new RegExp("^hsl\\("+[fn,mn,mn]+"\\)$"),On=new RegExp("^hsla\\("+[fn,mn,mn,fn]+"\\)$"),Sn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function jn(e){var t;return e=(e+"").trim().toLowerCase(),(t=hn.exec(e))?new In((t=parseInt(t[1],16))>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):(t=yn.exec(e))?En(parseInt(t[1],16)):(t=bn.exec(e))?new In(t[1],t[2],t[3],1):(t=gn.exec(e))?new In(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=vn.exec(e))?_n(t[1],t[2],t[3],t[4]):(t=wn.exec(e))?_n(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=kn.exec(e))?Tn(t[1],t[2]/100,t[3]/100,1):(t=On.exec(e))?Tn(t[1],t[2]/100,t[3]/100,t[4]):Sn.hasOwnProperty(e)?En(Sn[e]):"transparent"===e?new In(NaN,NaN,NaN,0):null}function En(e){return new In(e>>16&255,e>>8&255,255&e,1)}function _n(e,t,n,o){return o<=0&&(e=t=n=NaN),new In(e,t,n,o)}function Cn(e){return e instanceof pn||(e=jn(e)),e?new In((e=e.rgb()).r,e.g,e.b,e.opacity):new In}function In(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function Pn(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Tn(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Nn(e,t,n,o)}function xn(e,t,n,o){return 1===arguments.length?function(e){if(e instanceof Nn)return new Nn(e.h,e.s,e.l,e.opacity);if(e instanceof pn||(e=jn(e)),!e)return new Nn;if(e instanceof Nn)return e;var t=(e=e.rgb()).r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),a=Math.max(t,n,o),i=NaN,c=a-r,l=(a+r)/2;return c?(i=t===a?(n-o)/c+6*(n<o):n===a?(o-t)/c+2:(t-n)/c+4,c/=l<.5?a+r:2-a-r,i*=60):c=l>0&&l<1?0:i,new Nn(i,c,l,e.opacity)}(e):new Nn(e,t,n,null==o?1:o)}function Nn(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function Ln(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}sn(pn,jn,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),sn(In,function(e,t,n,o){return 1===arguments.length?Cn(e):new In(e,t,n,null==o?1:o)},un(pn,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new In(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new In(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+Pn(this.r)+Pn(this.g)+Pn(this.b)},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),sn(Nn,xn,un(pn,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Nn(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Nn(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new In(Ln(e>=240?e-240:e+120,r,o),Ln(e,r,o),Ln(e<120?e+240:e-120,r,o),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Mn=Math.PI/180,Rn=180/Math.PI,Dn=.96422,Wn=1,An=.82521,Un=4/29,Fn=6/29,qn=3*Fn*Fn,zn=Fn*Fn*Fn;function Bn(e){if(e instanceof Gn)return new Gn(e.l,e.a,e.b,e.opacity);if(e instanceof Xn)return $n(e);e instanceof In||(e=Cn(e));var t,n,o=Vn(e.r),r=Vn(e.g),a=Vn(e.b),i=Qn((.2225045*o+.7168786*r+.0606169*a)/Wn);return o===r&&r===a?t=n=i:(t=Qn((.4360747*o+.3850649*r+.1430804*a)/Dn),n=Qn((.0139322*o+.0971045*r+.7141733*a)/An)),new Gn(116*i-16,500*(t-i),200*(i-n),e.opacity)}function Gn(e,t,n,o){this.l=+e,this.a=+t,this.b=+n,this.opacity=+o}function Qn(e){return e>zn?Math.pow(e,1/3):e/qn+Un}function Hn(e){return e>Fn?e*e*e:qn*(e-Un)}function Zn(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Vn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Kn(e){if(e instanceof Xn)return new Xn(e.h,e.c,e.l,e.opacity);if(e instanceof Gn||(e=Bn(e)),0===e.a&&0===e.b)return new Xn(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Rn;return new Xn(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Xn(e,t,n,o){this.h=+e,this.c=+t,this.l=+n,this.opacity=+o}function $n(e){if(isNaN(e.h))return new Gn(e.l,0,0,e.opacity);var t=e.h*Mn;return new Gn(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}sn(Gn,function(e,t,n,o){return 1===arguments.length?Bn(e):new Gn(e,t,n,null==o?1:o)},un(pn,{brighter:function(e){return new Gn(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Gn(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new In(Zn(3.1338561*(t=Dn*Hn(t))-1.6168667*(e=Wn*Hn(e))-.4906146*(n=An*Hn(n))),Zn(-.9787684*t+1.9161415*e+.033454*n),Zn(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),sn(Xn,function(e,t,n,o){return 1===arguments.length?Kn(e):new Xn(e,t,n,null==o?1:o)},un(pn,{brighter:function(e){return new Xn(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Xn(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return $n(this).rgb()}}));var Yn=-.14861,Jn=1.78277,eo=-.29227,to=-.90649,no=1.97294,oo=no*to,ro=no*Jn,ao=Jn*eo-to*Yn;function io(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}sn(io,function(e,t,n,o){return 1===arguments.length?function(e){if(e instanceof io)return new io(e.h,e.s,e.l,e.opacity);e instanceof In||(e=Cn(e));var t=e.r/255,n=e.g/255,o=e.b/255,r=(ao*o+oo*t-ro*n)/(ao+oo-ro),a=o-r,i=(no*(n-r)-eo*a)/to,c=Math.sqrt(i*i+a*a)/(no*r*(1-r)),l=c?Math.atan2(i,a)*Rn-120:NaN;return new io(l<0?l+360:l,c,r,e.opacity)}(e):new io(e,t,n,null==o?1:o)},un(pn,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new io(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new io(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Mn,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),o=Math.cos(e),r=Math.sin(e);return new In(255*(t+n*(Yn*o+Jn*r)),255*(t+n*(eo*o+to*r)),255*(t+n*(no*o)),this.opacity)}}));var co=n(617),lo=[20,330],so=Object(co.scaleLinear)().range(lo),uo=Object(co.scaleLinear)().domain(lo).range([.5,.7]),po="A".charCodeAt(),fo="Z".charCodeAt(),mo=fo-po;function ho(e){for(var t=e.substr(0,2).toUpperCase(),n=0,o=0;o<t.length;o+=1){var r=Math.max(Math.min(t[o].charCodeAt(),fo),po);n+=Math.pow(mo,t.length-o-1)*(r-po)}return so.domain([0,Math.pow(mo,t.length)]),so(n)}function yo(e){var t=e.rank,n=e.label;return e.pseudo?"#ccc":function(e,t){var n=ho(e);n>70&&n<150&&(n+=80);var o=.5;return t&&(o=uo(ho(t))),xn(n,.6,o)}(t,n).toString()}function bo(e){return(bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function go(){return(go=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function vo(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function wo(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wo(n,!0).forEach(function(t){_o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wo(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Oo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function So(e){return(So=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Eo(e,t){return(Eo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Co=f.default.g.withConfig({displayName:"workload-summary-connections__Nodes",componentId:"sc-1uot2fj-0"})([""]),Io=f.default.g.withConfig({displayName:"workload-summary-connections__Edges",componentId:"sc-1uot2fj-1"})([""]),Po=function(e,t,n,o){return t/Math.max(1,Math.pow(e/n,o))},To=function(e){return 0===e?{x:50,y:35}:1===e?{x:50,y:35}:2===e?{x:150,y:35}:{x:150,y:135}},xo=function(e,t){var n=To(e),o=n.x,r=n.y,a=(e%4==0?t+.5:t)/e,i=2*Math.PI*a;return{x:o+100*Math.cos(i),y:r+100*Math.sin(i)}},No=function(e){var t=e.x,n=e.y,o=e.id,a=e.shape,i=e.label,c=e.rank,l=void 0===c?"":c,s=e.pseudo,u=e.highlighted,p=e.onMouseEnter,d=e.onMouseLeave,f=e.onClick,m=e.active,h=e.total;return r.a.createElement(b.GraphNode,{id:o,shape:a,label:i,highlighted:!s&&u,size:m?Po(h,45,8,.15):0,color:yo({label:i,pseudo:s,rank:l}),cursorType:s?"default":"pointer",onClick:s?Ft.a:f,onMouseEnter:p,onMouseLeave:d,isAnimated:!0,x:t,y:n})},Lo=function(e){var t=e.id,n=e.edgeWaypoints,o=e.active,a=e.total;return r.a.createElement(b.GraphEdge,{id:t,waypoints:n,thickness:Po(a,1,8,.5),arrowOffset:o?24:0,waypointsCap:2,withArrow:!0,isAnimated:!0})},Mo=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return o=this,r=(e=So(t)).call.apply(e,[this].concat(i)),n=!r||"object"!==bo(r)&&"function"!=typeof r?jo(o):r,_o(jo(n),"state",{centeredNodeId:null,connectionsCount:0,connectionsLoading:!0,connectionsUpdating:!1,hoveredNodeId:null,nodes:[]}),_o(jo(n),"getWorkloadNode",function(e,t){var n=Object(I.b)(t.workloadId),o=n.namespace,r=n.workloadName;return en()(e,{rank:"".concat(o,"/").concat(r)})}),_o(jo(n),"reloadConnectionsGraph",function(e){var t=e.instanceId,o=e.timestamp;Object(cn.ab)(t,{timestamp:o}).then(function(t){var o=t.nodes,r=n.getWorkloadNode(o,e);r?n.updateConnectionsGraph(r,o):n.setState({centeredNodeId:null,connectionsCount:0,nodes:[]}),n.setState({connectionsLoading:!1,connectionsUpdating:!1})})}),_o(jo(n),"updateConnectionsGraph",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ko({},n.state.nodes);zt()(Ht()(t),function(e){t[e]=ko({},t[e],{active:!1,highlighted:!1})});var o=e.adjacency||[],r=Ot()(Xt()(t,function(t){return Vt()(t.adjacency,e.id)}),"id"),a=le()(rn()(nn()([].concat(vo(o),vo(r))),e.id)),i=Yt()(a),c=To(i),l=e.id;zt()(Ht()(t),function(e){t[e]=ko({},t[e],{},c,{edgeWaypoints:[c,c]})}),t[l]=ko({},t[l],{active:!0,highlighted:!0}),zt()(a,function(e,n){var o=xo(i,n),a=Vt()(r,e)?[o,c]:[c,o];t[e]=ko({},t[e],{},o,{active:!0,edgeWaypoints:a})}),n.setState({centeredNodeId:l,connectionsCount:i,nodes:t})}),_o(jo(n),"handleNodeMouseEnter",function(e){n.setState({hoveredNodeId:e})}),_o(jo(n),"handleNodeMouseLeave",function(){n.setState({hoveredNodeId:null})}),_o(jo(n),"handleNodeClick",function(e){var t=n.props,o=t.sharedQueryParams,r=t.instanceId,a=t.workloadIds,i=en()(n.state.nodes,{id:e}).rank.split("/").join(":[a-z]*/"),c=en()(a,function(e){return e.match(i)});c&&(Object(an.trackEvent)("workload.summary.connection.node.click"),n.setState({hoveredNodeId:null}),y.a.push(Object(v.Z)(o,r,c)))}),_o(jo(n),"handleHeaderClick",function(){Object(an.trackEvent)("workload.summary.connections.header.click")}),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Eo(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.reloadConnectionsGraph(this.props)}},{key:"componentWillReceiveProps",value:function(e){if(e.timestamp!==this.props.timestamp&&(this.setState({connectionsUpdating:!0}),this.reloadConnectionsGraph(e)),e.workloadId!==this.props.workloadId){var t=this.getWorkloadNode(this.state.nodes,e);this.updateConnectionsGraph(t)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.instanceId,o=t.workloadId,a=this.state,i=a.hoveredNodeId,c=a.centeredNodeId,l=a.connectionsCount,s=a.connectionsLoading,u=a.connectionsUpdating,p=s&&r.a.createElement(b.CircularProgress,null),d=0===l&&r.a.createElement(Rt,null,"No connections to show"),f=en()(this.state.nodes,{id:i}),m=le()(Gt()(this.state.nodes),["id"]),h="View all".concat(s||d?"":" ".concat(l)," connections for ").concat(o);return r.a.createElement(Tt,null,r.a.createElement(xt,null,r.a.createElement(Dt,{to:Object(v.w)(n,o),onClick:this.handleHeaderClick,title:h},"Connections",r.a.createElement(Lt,null))),r.a.createElement(ln.a,{isLoading:u},p||d||r.a.createElement("svg",{width:"300px",height:"300px"},r.a.createElement(Io,null,Ot()(m,function(e){return r.a.createElement(Lo,go({key:e.id,total:l},e,{active:e.active&&e.id!==c}))})),r.a.createElement(Co,null,Ot()(m,function(t){return t.id!==i&&r.a.createElement(No,go({key:t.id,onMouseEnter:e.handleNodeMouseEnter,onClick:e.handleNodeClick,total:l},t))}),f&&r.a.createElement(No,go({key:f.id,onMouseLeave:this.handleNodeMouseLeave,onClick:this.handleNodeClick,total:l},f,{highlighted:!0}))))))}}])&&Oo(n.prototype,o),a&&Oo(n,a),t}();var Ro=Object(m.connect)(function(e,t){var n=t.instanceId,o=e.root.timeTravel,r=o.timestamp,a=o.showingLive;return{sharedQueryParams:Object(E.b)(e),showingLive:a,timestamp:r,workloadIds:d()(e,["root","workloadIds",n,"list"],[])}})(Mo),Do=n(1312),Wo=n(1249);function Ao(e){return(Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Fo(e){return(Fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zo(e,t){return(zo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Go=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return o=this,n=!(r=(e=Fo(t)).call.apply(e,[this].concat(i)))||"object"!==Ao(r)&&"function"!=typeof r?qo(o):r,Bo(qo(n),"state",{deployments:[],loadingDeployments:!1,loadingFirstDeployments:!0}),Bo(qo(n),"handleHeaderClick",function(){Object(an.trackEvent)("workload.summary.deployments.header.click")}),Bo(qo(n),"handleWorkloadClick",function(){Object(an.trackEvent)("workload.summary.deployments.workload.click")}),Bo(qo(n),"handleCommitClick",function(){Object(an.trackEvent)("workload.summary.deployments.commit.click")}),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zo(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.getDeployments(this.props),this.props.getFluxStatus(this.props.instanceId)}},{key:"componentWillReceiveProps",value:function(e){e.selectedTimeSec===this.props.selectedTimeSec&&e.workloadId===this.props.workloadId||this.getDeployments(e)}},{key:"getDeployments",value:function(e){var t=this,n=e.instanceId,o=e.workloadId,r=e.selectedTimeSec,a=ue.a.unix(r).format(),i=Object(Wo.c)(a).format();this.state.loadingFirstDeployments||this.setState({loadingDeployments:!0}),this.props.getFluxHistory(n,o,null,a,!1,i).then(function(){t.setState({deployments:t.props.deployments.filter(function(e){var t=e.Stamp;return ue()(t).unix()<=r}).slice(0,4),loadingDeployments:!1,loadingFirstDeployments:!1})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.instanceId,o=t.workloadId,a=t.fluxConfig,i=this.state,c=i.deployments,l=i.loadingDeployments,s=this.state.loadingFirstDeployments&&r.a.createElement(b.CircularProgress,null),u=ne()(c)&&r.a.createElement(Rt,null,"No deployments to show");return r.a.createElement(Tt,{fullWidth:!0},r.a.createElement(xt,null,r.a.createElement(Dt,{to:Object(v.p)(n,o),title:"View history of deployments for ".concat(o),onClick:this.handleHeaderClick},"Deployments",r.a.createElement(Lt,null))),r.a.createElement(ln.a,{isLoading:l},s||u||c.map(function(t){return r.a.createElement(Do.a,{key:d()(t,["Event","id"]),config:a,event:t,instanceId:n,workloadId:o,onWorkloadClick:e.handleWorkloadClick,onCommitClick:e.handleCommitClick})})))}}])&&Uo(n.prototype,o),a&&Uo(n,a),t}();var Qo=Object(m.connect)(function(e,t){var n=t.instanceId,o=t.workloadId;return{deployments:Object(I.a)(e,n,o),fluxConfig:Object(P.g)(e)[n],selectedTimeSec:Object(j.a)(e)}},{getFluxHistory:w.A,getFluxStatus:w.D})(Go),Ho=n(124);function Zo(e,t){return new Promise(function(n){var o={end:e.selectedTimeSec,query:t};Object(cn.W)(e.instanceId,o).then(function(e){var t=e.data;n(parseFloat(t.result[0]&&t.result[0].value[1]))})})}function Vo(e){return(Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ko(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function Xo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $o(e){return($o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jo(e,t){return(Jo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function er(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tr=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return o=this,n=!(r=(e=$o(t)).call.apply(e,[this].concat(i)))||"object"!==Vo(r)&&"function"!=typeof r?Yo(o):r,er(Yo(n),"state",{cpuUsage:NaN,gpuMemoryUsage:NaN,gpuUsage:NaN,loadingCpu:!1,loadingGpu:!1,loadingGpuMemory:!1,loadingMemory:!1,memoryUsage:NaN}),er(Yo(n),"handleHeaderClick",function(){Object(an.trackEvent)("workload.summary.resources.header.click")}),er(Yo(n),"handleCpuDialClick",function(){Object(an.trackEvent)("workload.summary.resources.cpu.click")}),er(Yo(n),"handleMemoryDialClick",function(){Object(an.trackEvent)("workload.summary.resources.memory.click")}),er(Yo(n),"handleGpuDialClick",function(){Object(an.trackEvent)("workload.summary.resources.gpu.click")}),er(Yo(n),"handleGpuMemoryDialClick",function(){Object(an.trackEvent)("workload.summary.resources.gpu-memory.click")}),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jo(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.getCpuUsage(this.props),this.getMemoryUsage(this.props),this.getGpuUsage(this.props),this.getGpuMemoryUsage(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.selectedTimeSec===this.props.selectedTimeSec&&e.workloadId===this.props.workloadId||(this.getCpuUsage(this.props),this.getMemoryUsage(this.props),this.getGpuUsage(this.props),this.getGpuMemoryUsage(this.props))}},{key:"getCpuUsage",value:function(e){var t=this,n=Object(Ho.a)(e.workloadId);this.setState({loadingCpu:!0}),Zo(e,n).then(function(e){t.setState({cpuUsage:e,loadingCpu:!1})})}},{key:"getMemoryUsage",value:function(e){var t=this,n=Object(Ho.e)(e.workloadId);this.setState({loadingMemory:!0}),Zo(e,n).then(function(e){t.setState({loadingMemory:!1,memoryUsage:e})})}},{key:"getGpuUsage",value:function(e){var t=this,n=Object(Ho.c)(e.workloadId);this.setState({loadingGpu:!0}),Zo(e,n).then(function(e){t.setState({gpuUsage:e,loadingGpu:!1})})}},{key:"getGpuMemoryUsage",value:function(e){var t=this,n=Object(Ho.b)(e.workloadId);this.setState({loadingGpuMemory:!0}),Zo(e,n).then(function(e){t.setState({gpuMemoryUsage:e,loadingGpuMemory:!1})})}},{key:"render",value:function(){var e=this.props,t=e.instanceId,n=e.workloadId,o=e.hasResources,a=e.sharedQueryParams,i=this.state,c=i.loadingCpu,l=i.loadingMemory,s=i.loadingGpu,u=i.loadingGpuMemory,p=i.cpuUsage,d=i.memoryUsage,f=i.gpuUsage,m=i.gpuMemoryUsage,h=Object(I.b)(n),y=h.namespace,g=h.workloadName,w=Object(v.i)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ko(n,!0).forEach(function(t){er(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ko(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},a,{namespace:y,workload:g}),t);return r.a.createElement(Tt,null,r.a.createElement(xt,null,r.a.createElement(Dt,{to:w,title:"View resource dashboards for ".concat(n),onClick:this.handleHeaderClick},"Cluster consumption",r.a.createElement(Lt,null))),r.a.createElement(Mt,null,r.a.createElement(ln.a,{isLoading:c},r.a.createElement(b.ResourceDial,{label:"CPU",value:p,disabled:!o,onClick:this.handleCpuDialClick,to:"".concat(w,"#workload-cpu")}))),r.a.createElement(Mt,null,r.a.createElement(ln.a,{isLoading:l},r.a.createElement(b.ResourceDial,{label:"Memory",value:d,disabled:!o,onClick:this.handleMemoryDialClick,to:"".concat(w,"#workload-memory")}))),(f>0||m>0)&&r.a.createElement("div",null,r.a.createElement(Mt,null,r.a.createElement(ln.a,{isLoading:s},r.a.createElement(b.ResourceDial,{label:"GPU",value:f,onClick:this.handleGpuDialClick,to:"".concat(w,"#workload-gpu")}))),r.a.createElement(Mt,null,r.a.createElement(ln.a,{isLoading:u},r.a.createElement(b.ResourceDial,{label:"GPU Memory",value:m,onClick:this.handleGpuMemoryDialClick,to:"".concat(w,"#workload-gpu-memory")})))))}}])&&Xo(n.prototype,o),a&&Xo(n,a),t}();var nr=Object(m.connect)(function(e){return{selectedTimeSec:Object(j.a)(e),sharedQueryParams:Object(E.b)(e)}})(tr),or=n(153),rr=n(87);function ar(e){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ir(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function cr(e){return(cr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sr(e,t){return(sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ur(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pr=f.default.div.withConfig({displayName:"workload-summary-statistics__SectionContent",componentId:"sc-11fmr4w-0"})(["display:flex;margin-right:30px;"]),dr=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return o=this,n=!(r=(e=cr(t)).call.apply(e,[this].concat(i)))||"object"!==ar(r)&&"function"!=typeof r?lr(o):r,ur(lr(n),"state",{loadingPodCount:!1,podCount:NaN}),ur(lr(n),"handlePodsCountClick",function(){Object(an.trackEvent)("workload.summary.statistics.pods.click")}),ur(lr(n),"handleMetricsCountClick",function(){Object(an.trackEvent)("workload.summary.statistics.metrics.click")}),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sr(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.getPodCount(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.selectedTimeSec===this.props.selectedTimeSec&&e.workloadId===this.props.workloadId||this.getPodCount(e)}},{key:"getPodCount",value:function(e){var t=this,n=Object(Ho.g)(e.workloadId);this.setState({loadingPodCount:!0}),Zo(e,n).then(function(e){t.setState({loadingPodCount:!1,podCount:e})})}},{key:"render",value:function(){var e=this.props,t=e.metrics,n=e.instanceId,o=e.workloadId,a=e.sharedQueryParams,i=this.state,c=i.podCount,l=i.loadingPodCount,s=Object(rr.e)("metrics");return r.a.createElement(Tt,null,r.a.createElement(xt,null,"Statistics"),r.a.createElement(pr,null,r.a.createElement(ln.a,{isLoading:l},r.a.createElement(or.a,{small:!0,label:"pods",number:c,onClick:this.handlePodsCountClick,to:Object(v.v)(a,n,o)})),r.a.createElement(or.a,{medium:!0,label:"metrics",number:Yt()(t.data),onClick:this.handleMetricsCountClick,to:Object(v.Z)(a,n,o,s)})))}}])&&ir(n.prototype,o),a&&ir(n,a),t}();var fr=Object(m.connect)(function(e){return{selectedTimeSec:Object(j.a)(e),sharedQueryParams:Object(E.b)(e)}})(dr);function mr(e){return(mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function yr(e,t){return!t||"object"!==mr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function br(e){return(br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gr(e,t){return(gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),yr(this,br(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gr(e,t)}(t,r.a.PureComponent),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.instanceId,n=e.workloadId,o=e.metrics,a=e.hasResources;return r.a.createElement(Pt,null,r.a.createElement(At,{instanceId:t,workloadId:n}),r.a.createElement(fr,{instanceId:t,workloadId:n,metrics:o}),r.a.createElement(nr,{instanceId:t,workloadId:n,hasResources:a}),r.a.createElement(Ro,{instanceId:t,workloadId:n}),r.a.createElement(Qo,{instanceId:t,workloadId:n}))}}])&&hr(n.prototype,o),a&&hr(n,a),t}(),wr=n(1470);function kr(e){return(kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Or(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Sr(e){return(Sr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Er(e,t){return(Er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _r=f.default.div.withConfig({displayName:"workload-metrics-list__WorkloadMetricsContainer",componentId:"sc-23urtv-0"})(["margin:10px;"]),Cr=f.default.span.withConfig({displayName:"workload-metrics-list__ErrorMessage",componentId:"sc-23urtv-1"})(["color:",";margin:10px 0;"],function(e){return e.theme.colors.orange500}),Ir=f.default.span.withConfig({displayName:"workload-metrics-list__MetricsNotFound",componentId:"sc-23urtv-2"})(["margin:10px 0;font-style:italic;"]),Pr=f.default.div.withConfig({displayName:"workload-metrics-list__MetricItem",componentId:"sc-23urtv-3"})([""]),Tr=function(e){function t(){var e,n,o,r,a,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,s=new Array(l),u=0;u<l;u++)s[u]=arguments[u];return o=this,r=(e=Sr(t)).call.apply(e,[this].concat(s)),n=!r||"object"!==kr(r)&&"function"!=typeof r?jr(o):r,a=jr(n),c=function(e){return Object(v.P)(n.props.sharedQueryParams,n.props.instanceId,[e])},(i="linkToMetric")in a?Object.defineProperty(a,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[i]=c,n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Er(e,t)}(t,r.a.PureComponent),n=t,(o=[{key:"render",value:function(){var e=this,t=le()(this.props.metrics.data);return ne()(t)?this.props.metrics.loading?r.a.createElement(de.a,null):this.props.metrics.error?r.a.createElement(Ir,null,"No metrics found for this workload."):r.a.createElement(Cr,null,this.props.metrics.error):r.a.createElement(_r,null,t.map(function(t){return r.a.createElement(Pr,{key:t},r.a.createElement(It.a,{to:e.linkToMetric(t)},t))}))}}])&&Or(n.prototype,o),a&&Or(n,a),t}();var xr=Object(m.connect)(function(e){return{sharedQueryParams:Object(E.b)(e)}})(Tr),Nr=n(234),Lr=n(1266);function Mr(e){return(Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Dr(e,t){return!t||"object"!==Mr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wr(e){return(Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ar(e,t){return(Ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ur=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Dr(this,Wr(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ar(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){var e=this.props.instanceId;this.props.getFluxWorkloads(e)}},{key:"render",value:function(){var e=this.props,t=e.loadedWorkloads,n=e.relatedDeployments,o=e.instanceId,a=e.workloadId,i=!t&&r.a.createElement(b.CircularProgress,null);return r.a.createElement(Lr.a,null,r.a.createElement(Pt,null,r.a.createElement(Tt,{fullWidth:!0},r.a.createElement(xt,null,"Workloads owned by this helm release"),i||r.a.createElement(gt,{searchDisabled:!0,instanceId:o,limitWorkloadIds:n})),r.a.createElement(Qo,{instanceId:o,workloadId:a})))}}])&&Rr(n.prototype,o),a&&Rr(n,a),t}();var Fr=Object(m.connect)(function(e,t){var n=t.workloadId,o=P.e(e)||{},r=Xt()(o,function(e){return e.Antecedent===n}).map(function(e){return e.ID});return{loadedWorkloads:Boolean(P.e(e)),relatedDeployments:r}},{getFluxWorkloads:Nr.l})(Ur);function qr(e){return(qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Br(e){return(Br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qr(e,t){return(Qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hr(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Zr=f.default.h1.withConfig({displayName:"workload-homepage__WorkloadTitle",componentId:"sc-16vfuhq-0"})(["font-size:",";margin:50px 0;text-align:center;small{display:block;font-size:",";opacity:0.5;}"],function(e){return e.theme.fontSizes.extraLarge},function(e){return e.theme.fontSizes.large});function Vr(e,t){return["metrics"].concat(Hr(e)).includes(t)?t:"summary"}var Kr=function(e){function t(){var e,n,o,r,a,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,s=new Array(l),u=0;u<l;u++)s[u]=arguments[u];return o=this,r=(e=Br(t)).call.apply(e,[this].concat(s)),n=!r||"object"!==qr(r)&&"function"!=typeof r?Gr(o):r,a=Gr(n),c=function(e){var t=n.props,o=t.instanceId,r=t.workloadId,a=t.sharedQueryParams;y.a.push(Object(v.Z)(a,o,r,e))},(i="handleSelectedTabChange")in a?Object.defineProperty(a,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[i]=c,n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qr(e,t)}(t,r.a.Component),n=t,(o=[{key:"render",value:function(){var e=this,t=this.props,n=t.instanceId,o=t.workloadId,a=t.location,i=t.dashboardId,c=t.dashboards,l=t.metrics,s=["summary","metrics"].concat(Hr(Ot()(c,"id")));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Zr,null,o,r.a.createElement("small",null,"Workload dashboard")),r.a.createElement(r.a.Fragment,{key:n},function(e){return"fluxhelmrelease"===Object(I.b)(e).workloadType||"helmrelease"===Object(I.b)(e).workloadType}(o)?r.a.createElement(Fr,{instanceId:n,workloadId:o}):r.a.createElement(jt.a,{dashboardId:i,dashboardIds:s,onSelectedTabChange:this.handleSelectedTabChange,location:a,instanceId:n,workloadId:o},r.a.createElement(St.a,{id:"summary",name:"Summary"},r.a.createElement(vr,{hasResources:s.includes("cadvisor-resources"),instanceId:n,workloadId:o,metrics:l})),c&&Ot()(c,function(t){return r.a.createElement(St.a,{key:t.id,id:t.id,name:t.name},r.a.createElement(wr.a,{instanceId:e.props.instanceId,workloadId:e.props.workloadId,dashboard:t}))}),r.a.createElement(St.a,{id:"metrics",name:"Metrics"},r.a.createElement(xr,{instanceId:n,workloadId:o,metrics:l})))))}}])&&zr(n.prototype,o),a&&zr(n,a),t}();var Xr=Object(m.connect)(function(e,t){var n=t.params,o=n.instanceId,r=n.workloadId,a=n.dashboardId,i=d()(e,["root","prometheus",o,"workloadDashboards",r])||[],c=d()(e,["root","prometheus",o,"workloadMetrics",r])||{data:[],error:null,loading:!0};return{dashboardId:a||Vr(Ot()(i,"id"),a),dashboards:i,instanceId:o,metrics:c,sharedQueryParams:Object(E.b)(e),workloadId:r,workloadsIds:x(e)}})(Kr);t.default=[r.a.createElement(l.a,{name:"workloads",component:$},r.a.createElement(i.a,{component:wt,gaName:"Workloads",mpEvent:"workloads.page.view"}),r.a.createElement(l.a,{path:":workloadId(/:dashboardId)",component:Xr,gaName:"WorkloadView",mpEvent:"workloads.homepage.view"}),r.a.createElement(u.a,{from:"workloads/:workloadId",to:"workloads/:workloadId/summary"}))]}}]);